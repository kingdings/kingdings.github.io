
<!DOCTYPE html>
<html lang="en">
<head>
<title>Tutorials</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script>
    </script>
	<link href="css/css_slider.css" type="text/css" rel="stylesheet" media="all"><!-- slider css -->
    <link href="css/bootstrap.css" rel='stylesheet' type='text/css' /><!-- bootstrap css -->
    <link href="css/style.css" rel='stylesheet' type='text/css' /><!-- custom css -->
    <link href="css/font-awesome.min.css" rel="stylesheet"><!-- fontawesome css -->	
</head>
<body>

<!-- top header -->
<div class="header-top">
	<div class="container">
		<div class="row">
			<div class="col-sm-6">
				<ul class="d-lg-flex header-w3_pvt">
					<li class="mr-lg-3">
						<!--<span class="fa fa-envelope-open"></span>
						<a href="mailto:dingwei@kunsan.ac.kr" class="">dingwei@kunsan.ac.kr</a>-->
					</li>
				</ul>
			</div>		
		</div>
	</div>
</div>

<header class="py-3">
	<div class="container">
			<div id="logo">
				<h1> <a href="index.html"><span class="fa fa-stethoscope" aria-hidden="true"></span> PostGeoMedia</a></h1>
			</div>
		<!-- nav -->
		<nav class="d-lg-flex">
			<label for="drop" class="toggle"><span class="fa fa-bars"></span></label>
			<input type="checkbox" id="drop" />
			<ul class="menu mt-2 ml-auto">
				<li class="active"><a href="index.html">Home</a></li>
				<li class=""><a href="install.html">Installation</a></li>
				<li class=""><a href="tutorials.html">Tutorials</a></li>
				<li class=""><a href="mailto:dingwei@kunsan.ac.kr">Contact Us</a></li>
			</ul>
		</nav>
		<!-- //nav -->
	</div>
</header>
<!-- banner -->
<div style="background-color:#000; height:70px;">
		<div class="container" style="color:#fff;margin-top:70px;"><br>
			<span>You Are Here » <a href="index.html">Home</a> » Tutorials</span>
		</div>
</div>
<!-- //banner -->


<!-- Latest News -->
<section>
		<div class="container py-lg-5">	
		<h4 class=" text-left mb-sm-2">Extensible data types</h4>
		<hr>
		<h6 style="line-height:22px; font-size:13px; text-align:justify; text-justify:inter-ideograph;" class="mt-3">PostGeoMedia contains many spatialtemporal data types, such as 
MPoint, MPolygon, MVideo, MPhoto, FOV, MDouble etc. Each data types stores the spatialtemporal
information. All datas are two-dimensional in the Euclidean space. Taking the formal definition intuitively, our PostGeoMedia type uses the following features.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;•	Each object is a sequence of timestamp-value pairs. <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;•	PostGeoMedia object must follow the Open Geospatial Consortium (OGC) moving feature standards.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;•	PostGeoMedia object can be of the different types (i.e., points, polygons, photo, video, double and so on). 
</h6>
<br>

<h4 class=" text-left mb-sm-2">Examples types</h4>
<hr>
<h6 style="line-height:22px; font-size:13px; text-align:justify; text-justify:inter-ideograph;"  class="mt-3">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;•	MPoint: ((40.67 -73. 83) 1000, (40.74, -73.99) 2000).<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;•	STPhoto: ('http://u-gis.net/p1.jpg' (40.74, -73.99) 1000 60 13.15 10).<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;•	MPhoto: (('http://u-gis.net/p1.jpg' (40.74, -73.99) 1000 60 13.15 10), ('http://u-gis.net/p2.jpg' (40.75, -73.93) 2000 60 13.23 10)).<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;•	MVideo: ('http://u-gis.net/mv1.mp4', ('t=1' (40.74, -73.99) 1000 60 13.17 10), ('t=2', (40.75, -73.93) 2000 60 12.59 10)).
<br><br>

</h6>
<h4 class=" text-left mb-sm-2">Extensible operations</h4>
<hr>
<h6 style="line-height:22px; font-size:13px; text-align:justify; text-justify:inter-ideograph;" class="mt-3">
Operations in PostGeoMedia are implemented as PL/Java functions. In this tutorial, we will take you with a step by step intructions to use these spatialtemporal operations.
<br><br>

</h6>
<h4 class=" text-left mb-sm-2">Table creation and data update	</h4>
<hr>
<h6 style="line-height:22px; font-size:13px; text-align:justify; text-justify:inter-ideograph;" class="mt-3">
The category of operations is used in creating and updating statements to change the recorded moving media data. We consider the following relational schema for example table userVideos, userTrajs and city that stores basic information.
<br>
</h6>
<h6 style="font-size:13px; text-align:justify; text-justify:inter-ideograph;">
<div style="background-color: #EDEDDF; padding-top:10px;padding-left:100px;">
<pre>
CREATE TABLE userTrajs (      CREATE TABLE userSensors(       CREATE TABLE userVideos (       CREATE TABLE city(
	id	integer,            id	integer,                  id	integer,              id	integer,
   	carnumber  text);          carnumber	text);             name  text);                   name	text,
                                                                                                  geo	geometry);
	
</pre>
</div>
</h6>
<hr>
<h6 style="font-size:13px; text-align:justify; text-justify:inter-ideograph;">
Add spatialtemporal data types into tables.<br><br>
<div style="background-color: #EDEDDF; padding-top:10px;padding-left:100px;">
<pre>
select addmgeometrycolumn('public','usertrajs','mt',4326,'mpoint',2, 50);
select addmgeometrycolumn('public','usersensors','md_accx',4326,'mdouble',2, 3000);
select addmgeometrycolumn('public','usersensors','md_accy',4326,'mdouble',2, 3000);
select addmgeometrycolumn('public','usersensors','md_accz',4326,'mdouble',2, 3000);
select addmgeometrycolumn('public','usersensors','md_gyrox',4326,'mdouble',2, 3000);
select addmgeometrycolumn('public','usersensors','md_gyroy',4326,'mdouble',2, 3000);
select addmgeometrycolumn('public','usersensors','md_gyroz',4326,'mdouble',2, 3000);
select addmgeometrycolumn('public','uservideos','mv',4326,'mvideo',2, 3000);

</pre>
</div>

</h6>
<hr>
<h6 style="font-size:13px; text-align:justify; text-justify:inter-ideograph;">
Insert data into tables.<br><br>
<div style="background-color: #EDEDDF; padding-top:10px;padding-left:100px;">
<pre>insert into usertrajs (id, carnumber) values( 1, '0000f77c-62c2a288.mov');
insert into usersensors (id, carnumber) values( 1, '0000f77c-62c2a288.mov');
insert into uservideos (id, name) values( 1, '0000f77c-62c2a288.mov');

</pre>
</div>

</h6>
<hr>
<h6 style="font-size:13px; text-align:justify; text-justify:inter-ideograph;">
Append current two moving points data into car 1’s trajectory in carTrajs table.<br><br>
<div style="background-color: #EDEDDF; padding-top:10px;padding-left:100px;">
<pre style="height: 48px;">
UPDATE carTrajs
SET mt = M_Append (mt, 'MPOINT ((40.67 -73. 83) 1000,(41.67 -73.81) 2000)')
WHERE id = 1; 
</pre>
</div>
<br><br>
</h6>
<h4 class=" text-left mb-sm-2">Temporal queries	</h4>
<hr>
<h6 style="font-size:13px; text-align:justify; text-justify:inter-ideograph;">
Retrieve videos in userVideos table which are taken during 'period (1100, 1200)'.<br><br>
<div style="background-color: #EDEDDF; padding-top:10px;padding-left:100px;">
<pre style="height: 48px;">
SELECT id, mv
FROM userVideos
WHERE M_Overlaps(mv, 'Period (1100, 1150)'); </pre>
</div>
<hr>
<h6 style="font-size:13px; text-align:justify; text-justify:inter-ideograph;" >
Retrieve videos in userVideos table which are taken during 'period (1100, 1150)', returns the sliced video files by 'period (1100, 1200)'.<br><br>
<div style="background-color: #EDEDDF; padding-top:10px;padding-left:100px;">
<pre style="height: 48px;">
SELECT id, M_Slice( mv, 'Period (1100, 1200)')
FROM userVideos
WHERE M_Overlaps(mv, 'Period (1100, 1150)');</pre>
</div>
<br><br>
<h4 class=" text-left mb-sm-2">Spatial and spatiotemporal queries	</h4>
<hr>
<h6 style="font-size:13px; text-align:justify; text-justify:inter-ideograph;" >
Retrieve videos in userVideos table which have entered the city 'New York'. <br><br>
<div style="background-color: #EDEDDF; padding-top:10px;padding-left:100px;">
<pre style="height: 48px;">
SELECT id, name, mv
FROM userVideos a, city c
WHERE M_Enters(a.mv, c.geo ) = true AND c.name='New York';</pre>
</div>
<hr>
<h6 style="font-size:13px; text-align:justify; text-justify:inter-ideograph;" >
Retrieve the cars in userTrajs table that have left from city ‘New York’ during 'period (1100, 1200)'.<br><br>
<div style="background-color: #EDEDDF; padding-top:10px;padding-left:100px;">
<pre style="height: 48px;">
SELECT id, carnumber
FROM userTrajs a, city c
WHERE  M_Leaves(M_Slice(a.mt,'Period (1100, 1200)'), c.geo) = true AND c.name = 'New York';
</pre>
</div>
<hr>
<h6 style=" font-size:13px; text-align:justify; text-justify:inter-ideograph;" >
Retrieve the cars in userTrajs table that traveled up to 500m from central New York city.<br><br>
<div style="background-color: #EDEDDF; padding-top:10px;padding-left:100px;">
<pre style="height: 65px;">SELECT id, carnumber
FROM userTrajs a 
WHERE  M_Max( 
M_Distance( a.mt, 'POLYGON ((40.74 -73.99, 40.74 -73.98, 40.73 -73.98, 40.73 -73.99, 40.74 -73.99 ))')) < 500.0;</pre>
</div>
<br><br>
<h4 class=" text-left mb-sm-2">Similarity queries	</h4>
<hr>
<h6 style=" font-size:13px; text-align:justify; text-justify:inter-ideograph;" >
Return LCVS similarity distances between two videos in userVideos table.<br><br>
<div style="background-color: #EDEDDF; padding-top:10px;padding-left:100px;">
<pre style="height: 32px;">SELECT a.id, b.id, M_LCVS (a.mv, b.mv, 40) 
FROM userVideos a, userVideos b;</pre>
</div>
<br><br>
<h4 class=" text-left mb-sm-2">FOV queries	</h4>
<hr>
<h6 style="font-size:13px; text-align:justify; text-justify:inter-ideograph;" >
Retrieve FOVs from userVideos table.<br><br>
<div style="background-color: #EDEDDF; padding-top:10px;padding-left:100px;">
<pre style="height: 32px;">
SELECT id, M_FOV(mv) 
FROM userVideos;
</pre>
</div>
<hr>
<h6 style="font-size:13px; text-align:justify; text-justify:inter-ideograph;" >
Retrieve FOVs in userVideos table that the shortest distance is less than 10m.<br><br>
<div style="background-color: #EDEDDF; padding-top:10px;padding-left:100px;">
<pre style="height: 48px;">
SELECT a.id, b.id, M_FOV(a.mv), M_FOV(b.mv)
FROM userVideos a, userVideos b 
WHERE M_DWithin(a.mv, a.mv, 10);
</pre>
</div>
<br><br>




<h4 class=" text-left mb-sm-2">Join queries	</h4>
<hr>
<h6 style="font-size:13px;">
Find the videos which could be taken car 'TRUMP001'.<br><br>
<div style="background-color: #EDEDDF; padding-top:10px;padding-left:100px;">
<pre style="height: 48px;">
SELECT a.id, b.id, a.mv
FROM userVideos a, userTrajs b
WHERE M_ANY(M_Intersects( a.mv, b.mt ) ) = true AND a.name ='TRUMP001';
</pre>
</div>
<hr>
<h6 style="font-size:13px;">
Find the videos in userVideos table which have the same movement trajectory during 'period (1100, 1150)'.<br><br>
<div style="background-color: #EDEDDF; padding-top:10px;padding-left:100px;">
<pre style="height: 48px;">
SELECT a.id, b.id
FROM userVideos a, userVideos b 
WHERE M_LCSS( M_Slice(a.mv, 'Period (1100, 1150)'), M_Slice(b.mv, 'Period (1100, 1150)'), 0.01, 40) = 1;
</pre>
</div>
<br><br>
		</div>
</section>
<!-- //Latest News -->

<!-- copyright -->
<div class="copyright">
	<div class="container py-4">
		<div class=" text-center">
			<p>© 2019 PostGeoMedia. All Rights Reserved | Design by <a href="http://mcalab.kunsan.ac.kr/"> InfoLab</a> </p>
		</div>
	</div>
</div>
<!-- //copyright -->
		
<!-- move top -->
<div class="move-top text-right">
	<a href="#home" class="move-top"> 
		<span class="fa fa-angle-up  mb-3" aria-hidden="true"></span>
	</a>
</div>
<!-- move top -->

</body>
</html>

